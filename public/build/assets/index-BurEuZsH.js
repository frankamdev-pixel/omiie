import{R as g,j as m,r as c,e as z}from"./app-Z8GPysXh.js";import{c as L,b as J,a as w,u as Q}from"./index-DlAXf6tu.js";import{u as P,a as G}from"./button-CBrWSNyg.js";import{P as j}from"./index-Dj7PKD87.js";function W(e){const o=e+"CollectionProvider",[s,r]=L(o),[A,v]=s(o,{collectionRef:{current:null},itemMap:new Map}),I=f=>{const{scope:t,children:i}=f,d=g.useRef(null),n=g.useRef(new Map).current;return m.jsx(A,{scope:t,itemMap:n,collectionRef:d,children:i})};I.displayName=o;const R=e+"CollectionSlot",_=G(R),p=g.forwardRef((f,t)=>{const{scope:i,children:d}=f,n=v(R,i),a=P(t,n.collectionRef);return m.jsx(_,{ref:a,children:d})});p.displayName=R;const u=e+"CollectionItemSlot",C="data-radix-collection-item",E=G(u),b=g.forwardRef((f,t)=>{const{scope:i,children:d,...n}=f,a=g.useRef(null),x=P(t,a),T=v(u,i);return g.useEffect(()=>(T.itemMap.set(a,{ref:a,...n}),()=>void T.itemMap.delete(a))),m.jsx(E,{[C]:"",ref:x,children:d})});b.displayName=u;function F(f){const t=v(e+"CollectionConsumer",f);return g.useCallback(()=>{const d=t.collectionRef.current;if(!d)return[];const n=Array.from(d.querySelectorAll(`[${C}]`));return Array.from(t.itemMap.values()).sort((T,h)=>n.indexOf(T.ref.current)-n.indexOf(h.ref.current))},[t.collectionRef,t.itemMap])}return[{Provider:I,Slot:p,ItemSlot:b},F,r]}var X=z[" useId ".trim().toString()]||(()=>{}),Z=0;function ee(e){const[o,s]=c.useState(X());return J(()=>{s(r=>r??String(Z++))},[e]),e||(o?`radix-${o}`:"")}function te(e){const o=c.useRef(e);return c.useEffect(()=>{o.current=e}),c.useMemo(()=>(...s)=>o.current?.(...s),[])}var oe=c.createContext(void 0);function re(e){const o=c.useContext(oe);return e||o||"ltr"}var N="rovingFocusGroup.onEntryFocus",ne={bubbles:!1,cancelable:!0},y="RovingFocusGroup",[D,K,ce]=W(y),[se,be]=L(y,[ce]),[ae,ue]=se(y),k=c.forwardRef((e,o)=>m.jsx(D.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx(D.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(ie,{...e,ref:o})})}));k.displayName=y;var ie=c.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:A=!1,dir:v,currentTabStopId:I,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:_,onEntryFocus:p,preventScrollOnEntryFocus:u=!1,...C}=e,E=c.useRef(null),b=P(o,E),F=re(v),[f,t]=Q({prop:I,defaultProp:R??null,onChange:_,caller:y}),[i,d]=c.useState(!1),n=te(p),a=K(s),x=c.useRef(!1),[T,h]=c.useState(0);return c.useEffect(()=>{const l=E.current;if(l)return l.addEventListener(N,n),()=>l.removeEventListener(N,n)},[n]),m.jsx(ae,{scope:s,orientation:r,dir:F,loop:A,currentTabStopId:f,onItemFocus:c.useCallback(l=>t(l),[t]),onItemShiftTab:c.useCallback(()=>d(!0),[]),onFocusableItemAdd:c.useCallback(()=>h(l=>l+1),[]),onFocusableItemRemove:c.useCallback(()=>h(l=>l-1),[]),children:m.jsx(j.div,{tabIndex:i||T===0?-1:0,"data-orientation":r,...C,ref:b,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{x.current=!0}),onFocus:w(e.onFocus,l=>{const Y=!x.current;if(l.target===l.currentTarget&&Y&&!i){const O=new CustomEvent(N,ne);if(l.currentTarget.dispatchEvent(O),!O.defaultPrevented){const M=a().filter(S=>S.focusable),H=M.find(S=>S.active),$=M.find(S=>S.id===f),q=[H,$,...M].filter(Boolean).map(S=>S.ref.current);V(q,u)}}x.current=!1}),onBlur:w(e.onBlur,()=>d(!1))})})}),U="RovingFocusGroupItem",B=c.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:A=!1,tabStopId:v,children:I,...R}=e,_=ee(),p=v||_,u=ue(U,s),C=u.currentTabStopId===p,E=K(s),{onFocusableItemAdd:b,onFocusableItemRemove:F,currentTabStopId:f}=u;return c.useEffect(()=>{if(r)return b(),()=>F()},[r,b,F]),m.jsx(D.ItemSlot,{scope:s,id:p,focusable:r,active:A,children:m.jsx(j.span,{tabIndex:C?0:-1,"data-orientation":u.orientation,...R,ref:o,onMouseDown:w(e.onMouseDown,t=>{r?u.onItemFocus(p):t.preventDefault()}),onFocus:w(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:w(e.onKeyDown,t=>{if(t.key==="Tab"&&t.shiftKey){u.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const i=de(t,u.orientation,u.dir);if(i!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let n=E().filter(a=>a.focusable).map(a=>a.ref.current);if(i==="last")n.reverse();else if(i==="prev"||i==="next"){i==="prev"&&n.reverse();const a=n.indexOf(t.currentTarget);n=u.loop?me(n,a+1):n.slice(a+1)}setTimeout(()=>V(n))}}),children:typeof I=="function"?I({isCurrentTabStop:C,hasTabStop:f!=null}):I})})});B.displayName=U;var le={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fe(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function de(e,o,s){const r=fe(e.key,s);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return le[r]}function V(e,o=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:o}),document.activeElement!==s))return}function me(e,o){return e.map((s,r)=>e[(o+r)%e.length])}var Se=k,ge=B;export{ge as I,Se as R,ee as a,te as b,be as c,W as d,re as u};
